(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-views-tabBar-cart"],{"09be":function(t,e,i){"use strict";i.r(e);var n=i("69ad"),a=i("c6fe");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("adfd");var o,c=i("f0c5"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"86c500fc",null,!1,n["a"],o);e["default"]=s.exports},2722:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";.cart[data-v-86c500fc]{padding:%?10?% 4%}.clearCart[data-v-86c500fc]{height:%?80?%;font-size:%?26?%;text-align:right;line-height:%?80?%;position:fixed;top:0;left:0;width:100vw;padding:0 4%;background-color:#fff;z-index:100}.cart_box[data-v-86c500fc]{margin-top:%?80?%;padding-bottom:%?100?%}.cart_list[data-v-86c500fc]{width:92vw;height:calc(22vw + %?34?%);-webkit-border-radius:%?12?%;border-radius:%?12?%;-webkit-box-shadow:0 %?4?% %?16?% rgba(0,0,0,.1);box-shadow:0 %?4?% %?16?% rgba(0,0,0,.1);overflow:hidden;border:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative;margin-bottom:%?20?%}.cart_list .checkbox-box[data-v-86c500fc]{padding-left:%?16?%;-webkit-flex-shrink:0;flex-shrink:0;height:22vw;margin-right:%?16?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative;width:%?50?%}.cart_list .checkbox-box .checkbox[data-v-86c500fc]{width:%?28?%;height:%?28?%;-webkit-border-radius:100%;border-radius:100%;border:solid %?1?%;position:absolute;top:50%;left:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.cart_list .checkbox-box .checkbox .on[data-v-86c500fc]{width:%?20?%;height:%?20?%;-webkit-border-radius:100%;border-radius:100%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.cart_list .cover[data-v-86c500fc]{width:22vw;height:22vw;-webkit-flex-shrink:0;flex-shrink:0;margin-left:%?10?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;overflow:hidden;margin-right:%?10?%;position:relative}.cart_list .cover .mask[data-v-86c500fc]{width:100%;height:100%;background-color:rgba(0,0,0,.6);position:absolute;top:0;left:0;text-align:center;color:#ddd;font-size:%?24?%;line-height:22vw}.cart_list .cover .masks[data-v-86c500fc]{width:100%;height:100%;position:absolute;top:0;left:0}.cart_list .cover uni-image[data-v-86c500fc]{width:100%;height:100%;display:block}.daodi[data-v-86c500fc]{text-align:center;font-size:%?24?%;color:#ccc;margin-top:%?30?%}.right[data-v-86c500fc]{height:22vw;width:100%;\n  /* overflow: hidden; */display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding-right:%?15?%;position:relative}.right .goods_name[data-v-86c500fc]{width:100%;font-size:%?24?%;line-height:%?34?%;max-height:%?68?%;color:#333;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.sku[data-v-86c500fc]{font-size:%?22?%;background-color:#f3f3f3;-webkit-border-radius:%?10?%;border-radius:%?10?%;height:%?40?%;line-height:%?40?%;padding:0 %?10?%;color:#a7a7a7;margin-bottom:%?40?%}.numbers[data-v-86c500fc]{position:absolute;width:100%;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;height:%?50?%;bottom:%?-5?%}.numbers .price[data-v-86c500fc]{font-size:%?30?%;line-height:%?50?%;color:#fa436a}.numbers .right_btn[data-v-86c500fc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-right:%?20?%}.right_btn .sub[data-v-86c500fc]{width:%?40?%;height:%?40?%;font-size:%?40?%;background-color:#f3f3f3;-webkit-border-radius:%?4?%;border-radius:%?4?%;text-align:center;line-height:%?40?%}.right_btn .sub[data-v-86c500fc]:active{background-color:#f8f8f8}.right_btn .input[data-v-86c500fc]{width:%?50?%;height:%?50?%;margin:0 %?8?%;background-color:#f3f3f3}.right_btn .input uni-input[data-v-86c500fc]{width:%?50?%;height:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?22?%;text-align:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#fa436a}.right_btn .add[data-v-86c500fc]{width:%?40?%;height:%?40?%;font-size:%?40?%;background-color:#f3f3f3;-webkit-border-radius:%?4?%;border-radius:%?4?%;text-align:center;line-height:%?40?%}.right_btn .add[data-v-86c500fc]:active{background-color:#f8f8f8}.del_mask[data-v-86c500fc]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:-21}.dask_del[data-v-86c500fc]{width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,.5);z-index:-20;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;opacity:0;-webkit-transition:all .3s;transition:all .3s}.dask_del .del[data-v-86c500fc],\n.cencal[data-v-86c500fc]{width:%?100?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;line-height:%?100?%;-webkit-border-radius:100%;border-radius:100%;text-align:center;font-size:%?24?%;background:-webkit-gradient(linear,left top,left bottom,from(#ff5d39),to(#ffaf48));background:-webkit-linear-gradient(#ff5d39,#ffaf48);background:linear-gradient(#ff5d39,#ffaf48);color:#fff;font-weight:500;margin:0 auto}.dask_del uni-text[data-v-86c500fc]:active{opacity:.9}.cencal[data-v-86c500fc]{background:-webkit-gradient(linear,left top,left bottom,from(#ffe846),to(#ffcd43));background:-webkit-linear-gradient(#ffe846,#ffcd43);background:linear-gradient(#ffe846,#ffcd43)}.bottom_all[data-v-86c500fc]{height:%?100?%;width:100%;padding:0 2%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:fixed;bottom:0;left:0;background-color:#fdfdfd;z-index:11;border-top:%?1?% solid #f8f8f8}.bottom_all .left[data-v-86c500fc]{float:left;width:40vw;font-size:%?24?%;position:relative}.bottom_all .left .delAll[data-v-86c500fc]{height:%?40?%;-webkit-border-radius:%?20?%;border-radius:%?20?%;font-size:%?22?%;line-height:%?38?%;border:solid %?1?%;text-align:center;width:%?92?%;position:absolute;right:%?50?%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.bottom_all .left .text[data-v-86c500fc]{position:absolute;left:%?60?%;top:50%;-webkit-transform:translateY(-52%);transform:translateY(-52%)}.bottom_all .checkbox-box[data-v-86c500fc]{padding-left:%?16?%;-webkit-flex-shrink:0;flex-shrink:0;height:%?100?%;margin-right:%?16?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative}.bottom_all .checkbox-box .checkbox[data-v-86c500fc]{width:%?32?%;height:%?32?%;-webkit-border-radius:100%;border-radius:100%;border:solid %?1?%;position:absolute;top:50%;left:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.bottom_all .checkbox-box .checkbox .on[data-v-86c500fc]{width:%?20?%;height:%?20?%;-webkit-border-radius:100%;border-radius:100%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.bottom_all .rights[data-v-86c500fc]{float:right;width:56vw;line-height:%?100?%;font-size:%?24?%}.bottom_all .rights uni-view[data-v-86c500fc]{float:right}.bottom_all .rights .sum[data-v-86c500fc]{font-weight:700;margin-right:%?20?%}.bottom_all .rights .jiesuan[data-v-86c500fc]{padding:0 %?22?%;-webkit-border-radius:%?24?%;border-radius:%?24?%;background-color:pink;height:%?50?%;line-height:%?50?%;color:#fff;font-size:%?24?%;margin-top:%?28?%;margin-left:%?40?%}\n/* 购物车为空的样式} */.nocart[data-v-86c500fc]{text-align:center;margin-top:30vh}.nocart .iconfont[data-v-86c500fc]{font-size:%?80?%;text-align:center}.nocart uni-view[data-v-86c500fc]{height:%?40?%;line-height:%?40?%;font-size:%?24?%;color:#999;margin-top:%?20?%}.nocart .title[data-v-86c500fc]{font-size:%?28?%;color:#535353}.nocart .go-login[data-v-86c500fc]{width:%?240?%;height:%?70?%;-webkit-border-radius:%?45?%;border-radius:%?45?%;margin:0 auto;line-height:%?70?%;font-size:%?28?%;color:#fff;margin-top:%?30?%}',""]),t.exports=e},"42a6":function(t,e,i){"use strict";var n=i("4ea4");i("4160"),i("a15b"),i("d81d"),i("a434"),i("a9e3"),i("b680"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("ade3"));i("96cf");var r=n(i("1da1")),o=i("cced"),c=getApp(),s={data:function(){return{colors:"",cartList:[],current:99999,allCurrent:!1,sum:0,sumPrice:0,lock:!1,bottomShow:"",isLogin:!0}},components:{},props:{},onLoad:function(t){this.bottomShow="100upx"},onReady:function(){},onShow:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.setData({colors:c.globalData.newColor,current:"99999",allCurrent:!1,sum:0,sumPrice:0}),(0,o.getToken)()){t.next=4;break}return this.isLogin=!1,t.abrupt("return");case 4:return this.isLogin=!0,this.setTabBarBadge(),t.next=8,this.getCart();case 8:e=t.sent,this.setData({cartList:e});case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{getCart:function(){return uni.$ajax("/api/cart/list").catch((function(t){return t})).catch((function(t){return uni.showToast({title:t,icon:"none"})}))},formatAttr:function(t){return JSON.parse(t).map((function(t){return t.val})).join(" | ")},setCurrent:function(t,e){var i;if(!t.failure){var n=this.cartList,r=this.cartList[e];r.current=!r.current;var o="cartList["+e+"]",c=!1,s=[];n.forEach((function(t){1==t.current&&s.push(t)})),s.length==n.length&&(c=!0),this.setData((i={},(0,a.default)(i,o,r),(0,a.default)(i,"allCurrent",c),i)),this.getSumprice()}},onshowDel:function(t,e){this.setData({current:e,lock:!0})},delItem:function(t,e){var i=this;return(0,r.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,uni.$ajax("/api/cart/del",{ids:[t.id]},"post").catch((function(t){return uni.showToast({title:t,icon:"none"})}));case 2:i.cartList.splice(e,1),i.setData({current:"9999",lock:!1}),uni.showToast({title:"删除成功",icon:"none"}),i.setTabBarBadge();case 6:case"end":return n.stop()}}),n)})))()},oncencal:function(){this.setData({current:"99999"})},onsub:function(t,e){var i=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.failure||t.quantity<=1)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uni.$ajax("/api/cart/add",{productId:t.productId,productSkuId:t.productSkuId,quantity:-1,type:1},"post").catch((function(t){return uni.showToast({title:t,icon:"none"})}));case 4:e.sent,n=t.quantity-1,i.$set(t,"quantity",n),i.getSumprice(),i.setTabBarBadge();case 9:case"end":return e.stop()}}),e)})))()},onadd:function(t,e){var i=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.failure){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uni.$ajax("/api/cart/add",{productId:t.productId,productSkuId:t.productSkuId,quantity:1,type:1},"post").catch((function(t){return uni.showToast({title:t,icon:"none"})}));case 4:e.sent,n=t.quantity+1,i.$set(t,"quantity",n),i.getSumprice(),i.setTabBarBadge();case 9:case"end":return e.stop()}}),e)})))()},setAllCurrent:function(){var t=this,e=t.cartList,i=t.allCurrent,n=!0;e.forEach((function(t){1==t.status&&(uni.showToast({title:"存在失效商品",icon:"none"}),n=!1)})),0!=n&&(e.forEach((function(t){t.current=!i})),i=!i,t.setData({cartList:e,allCurrent:i}),t.getSumprice())},getSumprice:function(){var t=this,e=t.cartList,i="",n=[];e.forEach((function(t){1!=t.current||t.failure||n.push(t)}));for(var a=n.length,r=0;r<a;r++){var o=n[r];i=(Number(i)+Number(Number(o.activityPrice||o.salePrice)*o.quantity)).toFixed(2)}t.sum=a,t.sumPrice=i},ontouchend:function(){var t=this;this.lock&&setTimeout((function(){t.setData({lock:!1})}),100)},clearInvalid:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=[],n=[],t.cartList.forEach((function(e,a){e.failure&&(i.push(e.id),n.push(t.cartList.splice(a,1))),e.current=!1})),!(i.length<1)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,uni.$ajax("/api/cart/del",{ids:i},"post").catch((function(t){return uni.showToast({title:t,icon:"none"})}));case 7:uni.showToast({title:"清空成功~",icon:"none"}),t.setTabBarBadge();case 9:case"end":return e.stop()}}),e)})))()},delectAll:function(){this.cartList=[],(0,o.removeCart)(),this.setTabBarBadge()},jumpDetails:function(t,e){1==t.failure||this.lock||uni.navigateTo({url:"/pages/views/goods/goodsDetails?productId="+t.productId})},settlement:function(){if(0!=this.sum){var t=[];this.cartList.forEach((function(e){1==e.current&&t.push(e)})),console.log(t),(0,o.setGoodsData)(t),setTimeout((function(){uni.hideLoading(),uni.navigateTo({url:"/pages/views/order/confirmOrder"})}),300)}},onStroll:function(){uni.switchTab({url:"/pages/views/tabBar/category"})},goLogin:function(){uni.navigateTo({url:"/pages/login/login"})}}};e.default=s},"69ad":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"cart"},[0!==t.cartList.length?[i("v-uni-view",{staticClass:"clearCart",style:"color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInvalid.apply(void 0,arguments)}}},[t._v("清空失效商品")]),i("v-uni-view",{staticClass:"cart_box"},[t._l(t.cartList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"cart_list",on:{longpress:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onshowDel(e,n)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.ontouchend.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"checkbox-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setCurrent(e,n)}}},[e.failure?i("v-uni-view",{staticClass:"checkbox",staticStyle:{"border-color":"#ccc"}},[i("v-uni-view")],1):i("v-uni-view",{staticClass:"checkbox",style:"border-color:"+t.colors},[i("v-uni-view",{class:1==e.current?"on":"",style:"background-color:"+t.colors})],1)],1),i("v-uni-view",{staticClass:"cover",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jumpDetails(e,n)}}},[i("v-uni-image",{attrs:{src:e.image,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"masks"}),e.failure?i("v-uni-text",{staticClass:"mask"},[t._v("已失效")]):t._e()],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"goods_name",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jumpDetails(e,n)}}},[t._v(t._s(e.name)+" "+t._s(e.subhead))]),"[]"!==e.attributeJson?i("v-uni-view",{staticClass:"sku"},[[i("v-uni-text",{staticStyle:{"margin-left":"10upx"}},[t._v(t._s(t.formatAttr(e.attributeJson)))])]],2):t._e(),i("v-uni-view",{staticClass:"numbers"},[i("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s((Number(e.activityPrice||e.salePrice)*e.quantity).toFixed(2)))]),i("v-uni-view",{staticClass:"right_btn"},[i("v-uni-view",{staticClass:"sub",style:"color:"+(1==e.num?"#ccc":""),on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onsub(e,n)}}},[t._v("-")]),i("v-uni-view",{staticClass:"input"},[i("v-uni-input",{attrs:{value:e.quantity,maxlength:"2",disabled:!0}})],1),i("v-uni-view",{staticClass:"add",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onadd(e,n)}}},[t._v("+")])],1)],1)],1),t.current==n?i("v-uni-view",{staticClass:"del_mask",style:"z-index:"+(t.current==n?"99":"-21"),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oncencal.apply(void 0,arguments)}}}):t._e(),i("v-uni-view",{staticClass:"dask_del",style:"opacity:"+(t.current==n?"1":"0")+";z-index:"+(t.current==n?"100":"-20")+";left:"+(t.current==n?"0":"-100%")},[i("v-uni-text",{staticClass:"del",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.delItem(e,n)}}},[t._v("删除")]),i("v-uni-text",{staticClass:"cencal",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oncencal.apply(void 0,arguments)}}},[t._v("取消")])],1)],1)})),t.cartList.length>=5?i("v-uni-view",{staticClass:"daodi"},[t._v("—— 到底啦 ——")]):t._e()],2),i("v-uni-view",{staticClass:"bottom_all",style:{marginBottom:t.bottomShow}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"checkbox-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setAllCurrent.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"checkbox",style:"border-color:"+t.colors},[i("v-uni-view",{class:1==t.allCurrent?"on":"",style:"background-color:"+t.colors})],1),i("v-uni-view",{staticClass:"text"},[t._v("全选")])],1),1==t.allCurrent?i("v-uni-view",{staticClass:"delAll",style:"border-color:"+t.colors+";color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delectAll.apply(void 0,arguments)}}},[t._v("删除")]):t._e()],1),i("v-uni-view",{staticClass:"rights"},[i("v-uni-view",{staticClass:"jiesuan",style:"background-color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.settlement.apply(void 0,arguments)}}},[t._v("结算("+t._s(t.sum)+")")]),i("v-uni-view",{staticClass:"sum"},[t._v("合计："),i("v-uni-text",{staticStyle:{"font-size":"30upx"}},[t._v("￥"+t._s(t.sumPrice||0))])],1)],1)],1)]:t._e(),0==t.cartList.length&&t.isLogin?i("v-uni-view",{staticClass:"nocart"},[i("v-uni-text",{staticClass:"iconfont icon-gouwuche1",style:"color:"+t.colors}),i("v-uni-view",[t._v("空空如也,"),i("v-uni-text",{style:"color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStroll.apply(void 0,arguments)}}},[t._v("随便逛逛 >")])],1)],1):t._e(),t.isLogin?t._e():i("v-uni-view",{staticClass:"nocart"},[i("v-uni-text",{staticClass:"iconfont icon-gouwuche1",style:"color:"+t.colors}),i("v-uni-view",{staticClass:"title"},[t._v("先去登录嘛")]),i("v-uni-view",{staticClass:"text"},[t._v("买些自己喜欢的东西，犒赏下优秀的自己吧")]),i("v-uni-view",{staticClass:"go-login",style:"background:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goLogin()}}},[t._v("去登陆")])],1)],2)},r=[]},a03c:function(t,e,i){var n=i("2722");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("36f23c29",n,!0,{sourceMap:!1,shadowMode:!1})},adfd:function(t,e,i){"use strict";var n=i("a03c"),a=i.n(n);a.a},c6fe:function(t,e,i){"use strict";i.r(e);var n=i("42a6"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a}}]);