(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/views/goods/goodsDetails"],{2821:function(o,t,e){"use strict";e.r(t);var i=e("876b"),n=e.n(i);for(var s in i)"default"!==s&&function(o){e.d(t,o,(function(){return i[o]}))}(s);t["default"]=n.a},"28e8":function(o,t,e){"use strict";(function(o){e("fffe");i(e("66fd"));var t=i(e("a487"));function i(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("543d")["createPage"])},"4a52":function(o,t,e){"use strict";var i=e("8cc6"),n=e.n(i);n.a},"54a7":function(o,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return s})),e.d(t,"a",(function(){return i}));var i={uniPopup:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-popup/uni-popup")]).then(e.bind(null,"cd11"))}},n=function(){var o=this,t=o.$createElement;o._self._c},s=[]},"876b":function(o,t,e){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=e("cced"),n=getApp(),s=function(){Promise.all([e.e("common/vendor"),e.e("components/uni-popup/uni-popup")]).then(function(){return resolve(e("cd11"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("pages/commponent/public/navBar").then(function(){return resolve(e("ac49"))}.bind(null,e)).catch(e.oe)},c=function(){Promise.all([e.e("common/vendor"),e.e("pages/commponent/public/sku")]).then(function(){return resolve(e("22a0"))}.bind(null,e)).catch(e.oe)},d=function(){e.e("pages/commponent/public/coupon").then(function(){return resolve(e("95c7"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("pages/commponent/public/loading").then(function(){return resolve(e("ef74"))}.bind(null,e)).catch(e.oe)},r=function(){e.e("pages/commponent/goods/poster").then(function(){return resolve(e("84d2"))}.bind(null,e)).catch(e.oe)},l={data:function(){return{colors:"",shows:!1,statusBarHeight:n.globalData.statusHeight+"px",toBar:n.globalData.toBar+"px",showdots:!1,swiperList:[],isColl:!1,latitude:"",longitude:"",nowList:{},goodsData:{bigImg:[],skus:[{}]},showModal:!1,couponshow:!1,isshowVideo:!0,voice:!1,showVideo:!1,isShow:!0,couponList:[{money:100,reduce:10,date:"2020-02-09 2020-10-02",id:1,status:0,condition:["新人专享","仅在支付时使用","可与其他产品共享"]},{money:100,reduce:20,date:"2020-02-09 2020-10-02",id:2,status:0,condition:["新人专享"]},{money:100,reduce:30,date:"2020-02-09 2020-10-02",id:3,status:0,condition:["仅在支付时使用","可与其他产品共享"]},{money:100,reduce:40,date:"2020-02-09 2020-10-02",id:4,status:0,condition:["新人专享","可与其他产品共享"]},{money:100,reduce:50,date:"2020-02-09 2020-10-02",id:5,status:0,condition:["新人专享","仅在支付时使用"]}],htmlNode:"",descriptionStr:'<div id="commDesc" hasdata="1" style="line-height: 2; transform-origin: 0px 0px; font-size: 30px;width:100%;"><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/99519/11/4669/136444/5de8bbdbE0cba049d/517f1fb75b582456.jpg!q70.dpg.webp" loaded="17"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/92267/13/4771/160442/5de8bbdbE50655175/7dd51e0b966aba15.jpg!q70.dpg.webp" loaded="16"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/93624/28/4672/131382/5de8bbdbE65d14e5d/81bc1227ec775788.jpg!q70.dpg.webp" loaded="15"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/97366/21/4817/101042/5de8bbdbE8854b673/7c4ce7faa45a418b.jpg!q70.dpg.webp" loaded="14"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/98311/21/4778/122770/5de8bbdcE13375754/f4324ca9294eef4c.jpg!q70.dpg.webp" loaded="13"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/103373/15/4747/118973/5de8bbdcE2058ee8e/d921d5f1a4aa5c89.jpg!q70.dpg.webp" loaded="12"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/88841/34/4711/84977/5de8bbdeE0b691b9a/e69796d32a63bbaa.jpg!q70.dpg.webp" loaded="11"><div class="for_separator"></div><img style="max-width:640px;" src="//img30.360buyimg.com/popWaterMark/jfs/t1/95248/2/4771/99041/5de8bbdfE06b41b3b/3c4a2b1cb97a5262.jpg!q70.dpg.webp" loaded="10"></div>',goodsEva:[{headimg:"/static/images/face.jpg",nickname:"反转",create_time:"2020-09-10 15:36",goods_name:"醇黑巧克力【20枚】",score:5,comment:"产品很不错,赞",images:["/static/images/goods/two.jpg","/static/images/goods/one.jpg"],reply:"感谢您的支持",tags:["价格合理","味道好","价格优惠","态度好"]},{headimg:"/static/images/face.jpg",nickname:"清风",create_time:"2020-09-10 13:36",goods_name:"草莓味【8枚】",score:4,comment:"味道还不错~",images:[],reply:"",tags:[]}],scrollShow:!1}},components:{navBar:a,sku:c,coupon:d,loading:u,poster:r,uniPopup:s},props:{},onLoad:function(o){var t=this;this.setData({colors:n.globalData.newColor}),this.getLocation(),this.getProductInfo(o.productId),setTimeout((function(){t.setData({isShow:!1})}),600)},onReady:function(){this.videoContext=o.createVideoContext("myVideo"),this.nowVideo=o.createVideoContext("nowVideo"),console.log(this.videoContext)},onShow:function(){},onHide:function(){},onPageScroll:function(o){o.scrollTop>=400?this.scrollShow=!0:this.scrollShow=!1},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return{title:this.goodsData.title,path:"/pages/views/goods/goodsDetails",imageUrl:this.goodsData.img}},onShareTimeline:function(){return{title:this.goodsData.title,path:"/pages/views/goods/goodsDetails",imageUrl:this.goodsData.img}},methods:{getLocation:function(){var t=this;o.getLocation({type:"wgs84",geocode:!0,success:function(o){console.log("获取经纬度成功",o),t.setData({latitude:o.latitude,longitude:o.longitude})},fail:function(){console.log("获取经纬度失败"),t.setData({latitude:"",longitude:""})},complete:function(){}})},setFrom:function(o){var t=o.replace(/\<img/gi,'<img class="rich-img" ');this.setData({htmlNode:t})},openPoster:function(){var t=this;this.shows=!1,o.showLoading({title:"海报绘制中.."}),this.$refs.popup.open(),setTimeout((function(){o.hideLoading(),t.shows=!0}),600)},setisColl:function(){var t=this;if(!(0,i.getToken)())return o.navigateTo({url:"/pages/login/login"});o.$ajax("/api/product/collection",{productId:this.goodsData.id,status:this.goodsData.isCollection?2:1},"post").then((function(e){t.goodsData.isCollection=!t.goodsData.isCollection,t.goodsData.isCollection?o.showToast({title:"收藏成功",icon:"none"}):o.showToast({title:"取消收藏",icon:"none"})})).catch((function(t){o.showToast({title:t,icon:"none"})}))},openMap:function(){o.openLocation({latitude:39.9,longitude:116.4,success:function(o){}})},nearAddress:function(){if(""!==this.longitude)this.openMap();else{var t=this;o.getSetting({success:function(e){e&&e.authSetting&&e.authSetting.hasOwnProperty("scope.userLocation")&&o.openSetting({success:function(){t.getLocation()}})}})}},onhide:function(){this.showModal=!1},openSku:function(){this.nowList=this.goodsData,this.showModal=!0},opencoupon:function(){this.couponshow=!0},hidecoupon:function(){this.couponshow=!1},toHome:function(){o.switchTab({url:"/pages/views/tabBar/home"})},toCart:function(){o.switchTab({url:"/pages/views/tabBar/cart"})},onplay:function(){this.setData({isshowVideo:!1}),this.videoContext.play()},setvoice:function(){var o=!this.voice;this.setData({voice:o})},swiperchange:function(o){this.videoContext&&(0!=o.detail.current?this.videoContext.pause():0==o.detail.current&&0==this.isshowVideo&&this.videoContext.play())},openvideo:function(){var o=this;this.setData({showVideo:!0}),setTimeout((function(){o.videoContext.pause(),o.nowVideo.play()}),200)},closeVideo:function(){var o=this;this.setData({showVideo:!1}),setTimeout((function(){o.nowVideo.stop(),o.videoContext.play()}),300)},preview:function(t,e){o.previewImage({current:e,urls:t})},goTop:function(){o.pageScrollTo({scrollTop:0})},onReceive:function(t,e){console.log(t,e),1!=t.status&&(this.couponList[e].status=1,o.showToast({title:"领取成功",icon:"none"}))},seeAll:function(){o.navigateTo({url:"/pages/views/goods/goodsEvaluate"})},getProductInfo:function(t){var e=this;o.$ajax("/api/product/info",{productId:t}).then((function(o){e.goodsData=o})).catch((function(t){o.showToast({title:t,icon:"none"})}))}}};t.default=l}).call(this,e("543d")["default"])},"8cc6":function(o,t,e){},a487:function(o,t,e){"use strict";e.r(t);var i=e("54a7"),n=e("2821");for(var s in n)"default"!==s&&function(o){e.d(t,o,(function(){return n[o]}))}(s);e("4a52");var a,c=e("f0c5"),d=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"c253ffd6",null,!1,i["a"],a);t["default"]=d.exports}},[["28e8","common/runtime","common/vendor"]]]);